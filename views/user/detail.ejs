<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/assets/images/logo.png" type="image/icon type" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      iframe {
        width: 100%;
        height: 70vh;
      }
      img {
        height: 70vh;
        object-fit: contain;
      }
    </style>
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
    <title><%= title %></title>
  </head>
  <body>
    <nav class="navbar bg-body-tertiary">
      <div class="container">
        <div class="container">
          <a href="/" class="navbar-brand btn btn-light" type="submit">Home</a>
        </div>
      </div>
    </nav>
    <div class="container mt-5">
      <% if(page === 'gameDetail' ) { %>
      <!-- Video Embed -->
      <%- videoEmbed %>
      <a href="<%= game.coinLink %>" class="btn btn-outline-dark"
        >Click here to learn more about the coin</a
      >
      <p class="mt-3"><%- game.description %></p>
      <% } else if(page === 'airdropDetail') { %>
      <!-- Video Embed -->
      <%- videoEmbed %>
      <button
        class="btn <%= !airdrop.isDone ? 'btn-dark' : 'btn-success' %> w-100"
      >
        <%= !airdrop.isDone ? 'Chưa trả' : 'Đã trả' %>
      </button>
      <p id="description" class="mt-3"><%- airdrop.description %></p>
      <% } else { %>
      <h1><%= news.title %></h1>
      <img class="w-100" src="<%= news.imageUrl %>" alt="news.png" />
      <small>Updated on <%= news.updatedAt.toLocaleDateString() %></small>
      <p><%- news.description %></p>
      <% } %>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
      integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
      crossorigin="anonymous"
    ></script>
    <script>
      // Function to check if user is logged in to Google
      function checkGoogleLogin() {
        gapi.load("auth2", function () {
          gapi.auth2.init().then(function () {
            var auth2 = gapi.auth2.getAuthInstance();
            if (auth2.isSignedIn.get()) {
              // User is already signed in, continue using the page
              console.log("User is signed in.");
            } else {
              // User is not signed in, redirect to Google login page
              window.location.href = "https://accounts.google.com/";
            }
          });
        });
      }

      // Load Google API client library
      (function () {
        var script = document.createElement("script");
        script.src = "https://apis.google.com/js/platform.js";
        script.async = true;
        script.defer = true;
        document.head.appendChild(script);
        script.onload = function () {
          // Once Google API client library is loaded, check login status
          checkGoogleLogin();
        };
      })();
    </script>
  </body>
</html>
